{"version":3,"sources":["scripts/main.js"],"names":["rows","document","querySelectorAll","score","querySelector","message","win","messageStart","scoreAnimation","button","arrayObject","scoreGame","gameStart","Ceil","value","position","number","getRandomElement","array","Math","floor","random","length","createGridElements","i","q","children","push","filter","el","getValue","renderElements","forEach","item","innerHTML","classList","remove","add","addAnimationClass","setTimeout","compersionArray","copy","result","index","map","element","restartGame","checkOnWin","some","checkMovie","UpToDown","leftToRigth","checkOnDoubleCount","getElementWithZeroValue","countStep","changeValueElement","select","scorePerMovie","setValue","returnChangeArray","arr","shift","leftOrRight","said","JSON","parse","stringify","reverse","reduce","acc","returnChangeArrays","filerArray","wrongNumber","includes","UpOrDown","arraySeleced","window","addEventListener","e","key"],"mappings":"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","file":"main.d90987c2.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst rows = document.querySelectorAll('.field-row');\nconst score = document.querySelector('.game-score');\nconst message = document.querySelector('.message-lose');\nconst win = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\nconst scoreAnimation = document.querySelector('.score-animation');\nconst button = document.querySelector('.button');\n\nlet arrayObject = [[], [], [], []];\nlet scoreGame = 0;\nlet gameStart = false;\n\nclass Ceil {\n  constructor(value, position) {\n    this.value = value;\n    this.position = position;\n  }\n\n  setValue(number) {\n    this.value = number;\n  }\n\n  getValue() {\n    return this.value;\n  }\n}\n\n/* auxiliary functions */\n\nconst getRandomElement = (array) => {\n  return array[Math.floor(Math.random() * array.length)];\n};\n\nconst createGridElements = () => {\n  for (let i = 0; i < rows.length; i++) {\n    for (let q = 0; q < rows[i].children.length; q++) {\n      if (arrayObject[i].length < 4) {\n        arrayObject[i].push(\n          new Ceil(0, rows[i].children[q])\n        );\n      }\n    }\n  }\n\n  for (let i = 0; i < 2; i++) {\n    getRandomElement(getRandomElement(arrayObject)\n      .filter(el => el.getValue() === 0)).value\n      = getRandomElement([2, 4]);\n  }\n};\n\nconst renderElements = (array) => {\n  array.forEach(el => {\n    el.forEach(item => {\n      item.position.innerHTML = '';\n\n      if (item.position.classList[1]) {\n        item.position.classList.remove(item.position.classList[1]);\n      }\n    });\n  });\n  score.innerHTML = '0';\n\n  array.forEach(el => {\n    el.forEach(item => {\n      if (item.getValue()) {\n        item.position.innerHTML = item.getValue();\n        item.position.classList.add(`field-cell--${item.getValue()}`);\n      }\n    });\n  });\n};\n\nconst addAnimationClass = (number) => {\n  scoreAnimation.classList.add('animation');\n\n  scoreAnimation.innerHTML = `+${number}`;\n\n  setTimeout(() => {\n    scoreAnimation.classList.remove('animation');\n  }, 500);\n};\n\nconst compersionArray = (copy, array) => {\n  let result = true;\n\n  copy.forEach((el, index) => {\n    el.map(item => item.value).forEach((element, i) => {\n      if (array[index].map(item => item.getValue())[i] !== element) {\n        result = false;\n      }\n    });\n  });\n\n  return result;\n};\n\nconst restartGame = () => {\n  message.classList.remove('hidden');\n};\n\nconst checkOnWin = () => {\n  let result = false;\n\n  arrayObject.forEach(el => {\n    if (el.some(item => item.getValue() === 2048)) {\n      win.classList.remove('hidden');\n\n      result = true;\n    }\n  });\n\n  return result;\n};\n\nconst checkMovie = () => {\n  let UpToDown = false;\n  let leftToRigth = false;\n\n  arrayObject.forEach(el => {\n    if (checkOnDoubleCount(el, 4)) {\n      leftToRigth = true;\n    }\n  });\n\n  for (let i = 0; i < arrayObject.length; i++) {\n    arrayObject[i].forEach((el, index) => {\n      if (arrayObject[i + 1]) {\n        if (el.getValue() === arrayObject[i + 1][index].getValue()) {\n          UpToDown = true;\n        }\n      }\n    });\n  }\n\n  return UpToDown === false && leftToRigth === false;\n};\n\nconst getElementWithZeroValue = () => {\n  const result = [];\n\n  arrayObject.forEach(el => {\n    el.forEach(item => {\n      if (item.getValue() === 0) {\n        result.push(item);\n      }\n    });\n  });\n\n  return result;\n};\n\nconst checkOnDoubleCount = (array, countStep) => {\n  for (let i = 0; i < countStep; i++) {\n    if (array[i + 1]) {\n      if (array[i].getValue() === array[i + 1].getValue()) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\n/* functions for events ArrorLeft ArrowRight */\n\nconst changeValueElement = (array, select, scorePerMovie) => {\n  for (let i = 0; i < array.length; i++) {\n    if (select.getValue() > 0 && array[i].getValue() > 0\n      && select.getValue() !== array[i].getValue()) {\n      break;\n    }\n\n    if (select.getValue() === array[i].getValue()) {\n      select.setValue(select.getValue() + array[i].getValue());\n      array[i].setValue(0);\n\n      if (select.getValue() + array[i].getValue()) {\n        scoreGame += select.getValue();\n        scorePerMovie.push(select.getValue() + array[i].getValue());\n      }\n    }\n\n    if (select.getValue() === 0 && array[i].getValue() !== 0) {\n      select.setValue(array[i].getValue());\n      array[i].setValue(0);\n    }\n  }\n\n  return select;\n};\n\nconst returnChangeArray = (countStep, arr, scorePerMovie) => {\n  const result = [];\n\n  for (let i = 0; i < countStep; i++) {\n    const select = arr.shift();\n\n    result.push(changeValueElement(arr, select, scorePerMovie));\n  }\n\n  return result;\n};\n\nconst leftOrRight = (said) => {\n  const copy = JSON.parse(JSON.stringify(arrayObject));\n  const scorePerMovie = [];\n\n  arrayObject = arrayObject.map(el => {\n    const countStep = el.length;\n\n    const result = returnChangeArray(countStep, said\n      ? el.reverse()\n      : el, scorePerMovie);\n\n    if (scorePerMovie.reduce((acc, item) => acc + item, 0)) {\n      addAnimationClass(scorePerMovie.reduce((acc, item) => acc + item, 0));\n    }\n\n    if (checkOnDoubleCount(result, countStep)\n      && compersionArray(copy, arrayObject)) {\n      return said\n        ? returnChangeArray(countStep, result, scorePerMovie).reverse()\n        : returnChangeArray(countStep, result, scorePerMovie);\n    }\n\n    return said ? result.reverse() : result;\n  });\n\n  if (!compersionArray(copy, arrayObject)) {\n    getRandomElement(getElementWithZeroValue())\n      .setValue(getRandomElement([2, 4]));\n    renderElements(arrayObject);\n  }\n  score.innerHTML = scoreGame;\n};\n\n/* functions for events ArrowUp ArrowDown */\n\nconst returnChangeArrays = (select, filerArray, array, scorePerMovie) => {\n  const wrongNumber = [];\n\n  for (let i = 0; i < array.length; i++) {\n    array.filter(el => !filerArray.includes(el)).forEach((item) => {\n      for (let q = 0; q < select.length; q++) {\n        if (select[q].getValue() > 0\n          && item[q].getValue() > 0\n          && item[q].getValue() !== select[q].getValue()) {\n          wrongNumber.push(q);\n        }\n\n        if (select[q].getValue() === 0 && item[q].getValue() > 0) {\n          select[q].setValue(select[q].getValue() + item[q].getValue());\n          item[q].setValue(0);\n        }\n\n        if (select[q].getValue() === item[q].getValue()\n          && !wrongNumber.includes(q)\n          && select[q].getValue() !== 0 && item[q].getValue() !== 0) {\n          select[q].setValue(select[q].getValue() + item[q].getValue());\n          item[q].setValue(0);\n\n          if (select[q].getValue() + item[i].getValue()) {\n            scoreGame += select[q].getValue();\n            scorePerMovie.push(select[q].getValue() + item[i].getValue());\n          }\n        }\n      }\n    });\n  }\n\n  return select;\n};\n\nconst UpOrDown = (said) => {\n  const copy = JSON.parse(JSON.stringify(arrayObject));\n  const arraySeleced = [];\n  const array = said === 'Down' ? arrayObject.reverse() : arrayObject;\n  const scorePerMovie = [];\n\n  arrayObject = array.map((el) => {\n    const select = el;\n\n    arraySeleced.push(select);\n\n    return returnChangeArrays(\n      select,\n      arraySeleced,\n      arrayObject,\n      scorePerMovie);\n  });\n\n  if (scorePerMovie.reduce((acc, item) => acc + item, 0)) {\n    addAnimationClass(scorePerMovie.reduce((acc, item) => acc + item, 0));\n  }\n\n  if (!compersionArray(copy, said === 'Down'\n    ? arrayObject.reverse()\n    : arrayObject)) {\n    getRandomElement(getElementWithZeroValue())\n      .setValue(getRandomElement([2, 4]));\n    renderElements(arrayObject);\n  }\n  score.innerHTML = scoreGame;\n};\n\n/* listeners */\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.key === 'ArrowLeft') {\n    if (!checkOnWin()) {\n      leftOrRight();\n    }\n\n    if (!getElementWithZeroValue(arrayObject).length) {\n      if (checkMovie()) {\n        restartGame();\n      };\n    }\n  }\n\n  if (e.key === 'ArrowRight') {\n    if (!checkOnWin()) {\n      leftOrRight('right');\n    }\n\n    if (!getElementWithZeroValue(arrayObject).length) {\n      if (checkMovie()) {\n        restartGame();\n      };\n    }\n  }\n\n  if (e.key === 'ArrowDown') {\n    if (!checkOnWin()) {\n      UpOrDown('Down');\n    }\n\n    if (!getElementWithZeroValue(arrayObject).length) {\n      if (!checkMovie()) {\n        restartGame();\n      };\n    }\n  }\n\n  if (e.key === 'ArrowUp') {\n    if (!checkOnWin()) {\n      UpOrDown();\n    }\n\n    if (!getElementWithZeroValue(arrayObject).length) {\n      if (checkMovie()) {\n        restartGame();\n      };\n    }\n  }\n});\n\nbutton.addEventListener('click', () => {\n  if (!gameStart) {\n    createGridElements();\n    renderElements(arrayObject);\n  }\n  messageStart.classList.add('hidden');\n  button.classList.add('restart');\n  button.innerHTML = 'Restart';\n  button.classList.remove('start');\n  gameStart = true;\n\n  if (checkMovie()) {\n    arrayObject = arrayObject.map(() => []);\n    message.classList.add('hidden');\n    createGridElements();\n    renderElements(arrayObject);\n    scoreGame = 0;\n    score.innerHTML = '0';\n  };\n});\n"]}